# 📚 书房识别功能说明

## 🎯 功能概述

DeepFloorplan重构版本现在支持书房识别，通过OCR技术检测户型图中的书房标识文字。

## 🔍 支持的书房关键词

### 中文关键词
- `书房` - 标准书房标识
- `书` - 简化标识

### 英文关键词  
- `study` - 书房
- `office` - 办公室
- `书房/office` - 中英文混合

### 相关词汇
- `办公室` - 办公空间
- `工作室` - 工作空间

## 🎨 可视化效果

- **颜色标识**: 棕色（brown）
- **标签编号**: 8
- **坐标显示**: 显示书房中心坐标和边界框
- **文字标注**: 显示识别到的原始文字和置信度

## 📊 输出信息

当检测到书房时，系统会输出：

```
🏠 书房1:
   📍 中心坐标: (x, y)
   📐 边界框: 左上(x1, y1) -> 右下(x2, y2)
   📏 尺寸: width x height 像素
   📊 面积: pixels 像素
   📝 识别文本: '书房' (置信度: confidence)
   🔗 坐标范围: X[x1-x2], Y[y1-y2]
```

## 🔧 技术实现

### OCR识别流程
1. **文字检测**: PaddleOCR检测图像中的文字区域
2. **关键词匹配**: 匹配书房相关关键词
3. **坐标计算**: 基于OCR文字位置计算房间中心点
4. **边界框生成**: 基于文字位置估算房间区域

### 坐标转换
- OCR图像: 2倍放大尺寸 (如1158x866)
- 处理过程: 转换到原始图像坐标系
- 最终输出: 原始图像像素坐标

## 📝 使用示例

```bash
# 运行重构版本进行房间检测
python demo_refactored_clean.py your_floorplan.jpg
```

## 💡 注意事项

1. **文字清晰度**: 确保户型图中的"书房"文字清晰可读
2. **字体大小**: 过小的文字可能影响OCR识别准确率
3. **图像质量**: 高分辨率图像有更好的识别效果
4. **文字位置**: 文字应该位于对应房间区域内

## 🚀 优势特点

- ✅ **精确定位**: 基于OCR文字位置，定位准确
- ✅ **多语言支持**: 中英文关键词识别
- ✅ **实时可视化**: 坐标轴和标注显示
- ✅ **详细信息**: 完整的坐标和面积信息
- ✅ **高置信度**: 显示OCR识别置信度

---

**更新日期**: 2025年8月13日  
**功能版本**: v1.0  
**兼容性**: 重构版本 (demo_refactored_clean.py)
