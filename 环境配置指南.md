# DeepFloorplan 环境配置指南

## 🎯 环境概述

**项目**: DeepFloorplan 户型图智能识别系统  
**Python版本**: 3.8-3.12 (推荐 3.10.11)  
**环境类型**: Python Virtual Environment  
**依赖管理**: pip + requirements.txt  

## 🚀 快速配置步骤

### 1. 创建虚拟环境
```bash
# 进入项目目录
cd DeepFloorplan

# 创建虚拟环境
python -m venv .venv

# 激活环境 (Windows)
.venv\Scripts\activate

# 激活环境 (Linux/Mac)
source .venv/bin/activate
```

### 2. 安装依赖
```bash
# 升级pip
python -m pip install --upgrade pip

# 安装项目依赖
pip install -r requirements.txt
```

### 3. 验证安装
```bash
# 测试环境
python test_environment.py

# 运行演示
python demo_fixed.py demo/demo1.jpg
```

## 📦 核心依赖包说明

### 🔧 基础依赖
- **TensorFlow**: 2.13.0 (机器学习框架)
- **NumPy**: 1.24.3 (数值计算)
- **OpenCV**: 4.11.0+ (计算机视觉)
- **Matplotlib**: 3.10.5+ (数据可视化)
- **Pillow**: 11.3.0+ (图像处理)

### 🎯 专用功能
- **PaddleOCR**: 2.6.1.3 (中文文字识别)
- **SciPy**: 1.15.3+ (科学计算)
- **PyTesseract**: 0.3.13 (OCR后备方案)

## 🛠️ 环境激活

### Windows PowerShell
```powershell
cd D:\ws\DeepFloorplan
.\.venv\Scripts\Activate.ps1
```

### Windows 批处理
```batch
cd D:\ws\DeepFloorplan
.venv\Scripts\activate.bat
```

### Linux/Mac
```bash
cd /path/to/DeepFloorplan
source .venv/bin/activate
```

## ⚡ 一键配置脚本

项目提供了自动化配置脚本：

### Windows
```batch
# 运行自动配置
setup.bat

# 检查文件完整性
check_files.bat

# 激活环境
activate_dfp.bat
```

## 🔍 环境验证清单

### ✅ 检查项目
- [ ] Python版本正确 (3.8-3.12)
- [ ] 虚拟环境已创建并激活
- [ ] 所有依赖包安装成功
- [ ] 预训练模型文件存在
- [ ] 测试脚本运行正常

### 🏃‍♂️ 快速测试
```bash
# 1. 测试环境配置
python test_environment.py

# 2. 测试基础功能
python demo_fixed.py demo/demo1.jpg

# 3. 检查输出文件
ls output/
```

## 🐛 常见问题

### Q1: TensorFlow GPU版本问题
**问题**: CUDA版本不兼容  
**解决**: 使用CPU版本 `tensorflow==2.13.0`

### Q2: PaddleOCR安装失败
**问题**: 网络连接或依赖冲突  
**解决**: 
```bash
pip install paddlepaddle-cpu
pip install paddleocr==2.6.1.3
```

### Q3: 中文字体显示问题
**问题**: 生成图片中文乱码  
**解决**: 系统需要安装中文字体 (simhei.ttf 或 msyh.ttc)

## 📊 系统资源要求

| 组件 | 最低要求 | 推荐配置 |
|------|----------|----------|
| CPU | 4核心 | 8核心+ |
| 内存 | 8GB | 16GB+ |
| 存储 | 10GB | 20GB+ |
| Python | 3.8 | 3.10.11 |

## 🎯 下一步

环境配置完成后，可以：
1. 查看 `README.md` 了解项目功能
2. 运行 `demo_fixed.py` 进行测试
3. 查看 `颜色编码说明.md` 了解结果含义
4. 阅读具体功能说明文档
